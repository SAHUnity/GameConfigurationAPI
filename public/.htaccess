<IfModule mod_rewrite.c>
    RewriteEngine On

    # Block access to git, composer, etc.
    RewriteRule ^(\.git|composer\.json|composer\.lock|package\.json|package-lock\.json) - [F]

    # Block access to src and var directories if they are somehow accessible (usually they are outside public_html)
    # But if User mapped document root to project root erroneously:
    RewriteRule ^(src|var)/ - [F]

    # API Routing: /api/v1 -> api/index.php
    RewriteRule ^api/v1/?$ api/index.php [L,QSA]

    # CORS Headers
    Header set Access-Control-Allow-Origin "*"
    Header set Access-Control-Allow-Methods "GET, OPTIONS"
    Header set Access-Control-Allow-Headers "Content-Type, X-API-KEY"

    # Block access to .env
    <Files .env>
        Order allow,deny
        Deny from all
    </Files>
</IfModule>
